(this["webpackJsonpnotes-frontend"]=this["webpackJsonpnotes-frontend"]||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(16),u=n.n(c),o=n(6),i=n(1),s=n.n(i),l=n(3),p=n(5),f=n(4),m=n.n(f),d={getAll:function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/notes");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/notes",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.put("".concat("/api/notes","/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("".concat("/api/notes","/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(e){var t=e.note,n=e.toggleImportance,r=e.handleDelete,c=t.important?"make not important":"make important";return a.a.createElement("li",{className:"note"},t.content,a.a.createElement("button",{onClick:n},c),a.a.createElement("button",{onClick:function(){return r(t)}},"Delete"))},b=function(e){var t=e.message;return null===t?null:a.a.createElement("div",{className:"error"},t)},h=function(){return a.a.createElement("div",{style:{color:"green",fontStyle:"italic",fontSize:16}},a.a.createElement("br",null),a.a.createElement("em",null,"Note app, department of computer science, University of Helsinki, 2020"))},w=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),i=Object(p.a)(u,2),f=i[0],m=i[1],w=Object(r.useState)(!0),x=Object(p.a)(w,2),k=x[0],E=x[1],O=Object(r.useState)(null),j=Object(p.a)(O,2),y=j[0],g=j[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getAll();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();try{e()}catch(y){g("Initial notes could not be fetched"),setTimeout((function(){g(null)}),5e3)}}),[]);var S=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={id:Math.floor(1e4*Math.random()),content:f,date:(new Date).toISOString(),important:Math.random()>.5},e.prev=2,e.next=5,d.create(r);case 5:a=e.sent,c(n.concat(a)),m(""),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),g('"'.concat(r.content,'" could not be added to the database')),setTimeout((function(){g(null)}),5e3);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.find((function(e){return e.id===t})),a=Object(o.a)(Object(o.a)({},r),{},{important:!r.important}),e.prev=2,e.next=5,d.update(t,a);case 5:u=e.sent,c(n.map((function(e){return e.id===t?u:e}))),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),g('The note "'.concat(r.content,'" was already deleted from the server')),setTimeout((function(){g(null)}),5e3),c(n.filter((function(e){return e.id!==r.id})));case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.content,a=t.id,!window.confirm('Are you sure you want to delete "'.concat(r,'"?'))){e.next=13;break}return e.prev=3,e.next=6,d.remove(a);case 6:c(n.filter((function(e){return e.id!==a}))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),g("".concat(r," could not be removed")),setTimeout((function(){g(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement("h1",null,"Notes"),a.a.createElement(b,{message:y}),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return E(!k)}},"show ",k?"important":"all")),a.a.createElement("ul",null,n?(k?n:n.filter((function(e){return e.important}))).map((function(e){return a.a.createElement(v,{key:e.id,note:e,toggleImportance:function(){return D(e.id)},handleDelete:I})})):null),a.a.createElement("form",{onSubmit:S},a.a.createElement("input",{type:"text",value:f,onChange:function(e){m(e.target.value)}}),a.a.createElement("button",{type:"submit"},"Save")),a.a.createElement(h,null))};n(40);u.a.render(a.a.createElement(w,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.ef17e0cf.chunk.js.map